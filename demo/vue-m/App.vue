<script setup lang="ts">
import autoDialog from '../../src';
import { ref } from 'vue'

// ä½¿ç”¨æ–°çš„DOMç§»åŠ¨æ¨¡å¼
function open() {
  autoDialog.show(null, {
    domMove: {
      containerId: 'vue-dialog-container',  // å¼¹çª—å®¹å™¨çš„ID
      sourceElementId: 'num'                // è¦ç§»åŠ¨çš„å…ƒç´ ID
    },
    showMask: true,
    animation: true,
    onOpened: () => console.log('Vue DOMç§»åŠ¨å¼¹çª—å·²æ‰“å¼€'),
    onClosed: () => console.log('Vue DOMç§»åŠ¨å¼¹çª—å·²å…³é—­ï¼Œå…ƒç´ å·²æ¢å¤')
  })
}

// å“åº”å¼æ•°æ®
const count = ref(0)
const message = ref('Hello AutoDialog DOM Move!')

const closeDialog = () => {
  autoDialog.close()
}
</script>

<template>
  <div style="padding: 20px; max-width: 600px; margin: 0 auto;">
    {{ count }}
    <h2>Vue AutoDialog DOMç§»åŠ¨æ¨¡å¼æµ‹è¯•</h2>
    <p style="color: #666; margin-bottom: 20px;">
      è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†æ–°çš„DOMç§»åŠ¨æ¨¡å¼ï¼Œç›®æ ‡å…ƒç´ IDä¸º "num"
    </p>
    
    <!-- è¦ç§»åŠ¨çš„å†…å®¹ï¼ŒIDä¸º "num" -->
    <div id="num" style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); border: 3px dashed #007bff; margin: 20px 0;">
      <h3 style="margin-top: 0; color: #007bff;">ğŸ¯ è¿™æ˜¯IDä¸º "num" çš„å…ƒç´ </h3>
      
      <!-- Vue å“åº”å¼è®¡æ•°å™¨ -->
      <div style="text-align: center; margin: 20px 0;">
        <div style="font-size: 2em; color: #007bff; font-weight: bold; margin-bottom: 15px;">
          è®¡æ•°å™¨: {{ count }}
        </div>
        <div style="display: flex; gap: 10px; justify-content: center; margin-bottom: 15px;">
          <button @click="count++" style="padding: 8px 16px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer;">+1</button>
          <button @click="count--" style="padding: 8px 16px; background: #ffc107; color: #333; border: none; border-radius: 6px; cursor: pointer;">-1</button>
          <button @click="count = 0" style="padding: 8px 16px; background: #dc3545; color: white; border: none; border-radius: 6px; cursor: pointer;">é‡ç½®</button>
        </div>
      </div>

      <!-- Vue åŒå‘ç»‘å®šè¾“å…¥æ¡† -->
      <div style="margin: 20px 0;">
        <label style="display: block; margin-bottom: 5px; font-weight: bold;">è¾“å…¥æ–‡æœ¬:</label>
        <input 
          v-model="message" 
          placeholder="è¾“å…¥ä¸€äº›æ–‡å­—..." 
          style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 6px; font-size: 14px; margin-bottom: 10px;"
        />
        <div style="background: #f8f9fa; padding: 15px; border-radius: 6px;">
          <strong>å®æ—¶é¢„è§ˆ:</strong>
          <p style="margin: 5px 0; color: #007bff;">{{ message }}</p>
        </div>
      </div>

      <!-- è®¡ç®—å±æ€§å±•ç¤º -->
      <div style="background: #e7f3ff; padding: 15px; border-radius: 6px; margin: 15px 0;">
        <strong>ğŸ“Š å®æ—¶è®¡ç®—:</strong>
        <ul style="margin: 10px 0; padding-left: 20px;">
          <li>å½“å‰è®¡æ•°: <strong>{{ count }}</strong></li>
          <li>è®¡æ•°å¹³æ–¹: <strong>{{ count * count }}</strong></li>
          <li>æ–‡æœ¬é•¿åº¦: <strong>{{ message.length }}</strong></li>
          <li>æ˜¯å¦ä¸ºå¶æ•°: <strong>{{ count % 2 === 0 ? 'æ˜¯' : 'å¦' }}</strong></li>
        </ul>
      </div>

      <!-- å…³é—­æŒ‰é’® -->
      <div style="text-align: center; margin-top: 20px;">
        <button @click="closeDialog" style="padding: 12px 24px; background: #17a2b8; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 16px;">
          å…³é—­å¼¹çª—
        </button>
      </div>

      <p style="font-size: 12px; color: #666; margin-top: 20px; text-align: center;">
        ğŸš€ è¿™ä¸ªå…ƒç´ IDä¸º "num"ï¼Œä¼šè¢«å®Œæ•´ç§»åŠ¨åˆ°å¼¹çª—ä¸­ï¼ŒVueå“åº”å¼ç»‘å®šå®Œå…¨ä¿æŒï¼
      </p>
    </div>

    <!-- æ§åˆ¶æŒ‰é’® -->
    <div style="text-align: center; margin: 30px 0;">
      <button @click="open" style="padding: 15px 30px; background: #007bff; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: bold;">
        ğŸ“¦ ç§»åŠ¨ "num" å…ƒç´ åˆ°å¼¹çª—
      </button>
    </div>

    <!-- ä½¿ç”¨è¯´æ˜ -->
    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-top: 30px;">
      <h3>ğŸ’¡ DOMç§»åŠ¨æ¨¡å¼è¯´æ˜</h3>
      <ul style="color: #666;">
        <li>ç‚¹å‡»æŒ‰é’®ä¼šå°†IDä¸º "num" çš„å…ƒç´ ç§»åŠ¨åˆ°å¼¹çª—ä¸­</li>
        <li>Vueçš„å“åº”å¼æ•°æ®ç»‘å®šåœ¨ç§»åŠ¨è¿‡ç¨‹ä¸­å®Œå…¨ä¿æŒ</li>
        <li>å…³é—­å¼¹çª—æ—¶å…ƒç´ ä¼šè‡ªåŠ¨å›åˆ°åŸæ¥çš„ä½ç½®</li>
        <li>æ— éœ€é€‚é…å™¨ï¼Œçº¯DOMæ“ä½œå®ç°</li>
      </ul>
      
      <div style="background: #e7f3ff; padding: 15px; border-radius: 6px; margin-top: 15px;">
        <strong>ğŸ”§ ä»£ç ç¤ºä¾‹:</strong>
        <pre style="margin: 10px 0; color: #333; overflow-x: auto;"><code>autoDialog.show(null, {
  domMove: {
    containerId: 'vue-dialog-container',
    sourceElementId: 'num'  // ç›®æ ‡å…ƒç´ ID
  }
})</code></pre>
      </div>
    </div>
  </div>
</template>

<style scoped>
button:hover {
  opacity: 0.9;
  transform: translateY(-2px);
  transition: all 0.2s ease;
}

button:active {
  transform: translateY(0);
}

input:focus {
  outline: none;
  border-color: #007bff;
  box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
}
</style>
